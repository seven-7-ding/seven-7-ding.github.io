<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post</title>
    <link rel="stylesheet" href="../../style.css">
    <!-- Include KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Include marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="../../script.js"></script>
</head>
<body>
    <div class="blog-viewer-container">
        <div class="blog-nav">
            <a href="../../index.html" class="back-button">‚Üê Back to Insights</a>
            <button class="theme-toggle" id="themeToggle"></button>
        </div>
        <div id="blogContent" class="loading">Loading blog post...</div>
    </div>

    <script>
        // Load theme preference and initialize
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                isDarkTheme = true;
                document.body.classList.add('dark-theme');
            }
            
            // Update theme button
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.innerHTML = isDarkTheme 
                    ? '<img src="../images/icon-light.png" alt="Light" style="width: 20px; height: 20px;">' 
                    : '<img src="../images/icon-dark.png" alt="Dark" style="width: 20px; height: 20px;">';
                themeToggle.addEventListener('click', toggleTheme);
            }
            
            // Update back button URL with page parameter
            const urlParams = new URLSearchParams(window.location.search);
            const fromPage = urlParams.get('from') || 'insights_and_ideas';
            const backButton = document.querySelector('.back-button');
            if (backButton) {
                backButton.href = `../../index.html?page=${fromPage}`;
            }
            
            // Load blog post
            initBlogViewer();
        });
    </script>
</body>
</html>
